# 数据库实验2021

## 介绍
1.  在Educoder上进行MySQL基本语句操作的训练。
2.  华中科技大学数据库实验，设计一个简易的数据库管理系统。

## 实训平台测试
Educoder中所有关卡的代码均已导出到对应的`.sql`文件中，这里不作过多的说明。具体可见[实验报告](实验报告.docx)。

## 配置环境
1.  使用[IntelliJ IDEA 2021.1.1 x64](https://www.jetbrains.com/idea/download/#section=windows)打开本项目。
2.  点击 **文件** → **项目结构** 或者使用 **Ctrl+Shift+Alt+S** 打开如图所示界面，然后选择SDK，本项目所使用的JDK版本为 **openjdk-15** ，也可以自行添加不同的JDK版本，如果没有JDK，在IDEA中可以选择 **下载JDK...** <br>
![项目结构](https://images.gitee.com/uploads/images/2021/0628/161033_e21a377e_8206880.png "屏幕截图.png") 
3.   **重点！！** 配置JAVAFX。可参考[JDK13配置JavaFX-V2.pdf](JDK13配置JavaFX-V2.pdf)中的提示。 **注意** 不同版本的IDEA部分界面可能不同，最重要的部分是图中的 **--module-path D:\jdks\javafx-sdk-11.0.2\lib --add-modules=javafx.controls,javafx.fxml** ，点击 :tw-1f528: (绿锤子)右边的`Main`然后选择 **编辑配置** ，在编辑配置界面依次点击 **修改选项** → **添加VM选项** ，在对应的地方添加好你的 **javafx-sdk\lib** 的路径即可<br>
![编辑配置](https://images.gitee.com/uploads/images/2021/0628/164322_de51aaf1_8206880.png "屏幕截图.png")

## 使用说明
在HospitalManagementSystem/out/artifacts/HospitalManagementSystem_jar路径下可以找到名为 **run.bat** 的脚本文件，双击后可直接运行 **医院管理系统** 
详细的说明可见[实验报告](实验报告.docx)，以下只作简要概括。

#### 医师登录
通过用户名密码登录，分为 **医护人员** 和 **管理人员** 。不同的人员登录的界面是不一样的。

#### 病人服务
1.  病人无需登录，但是在提交挂号信息时，会在数据库中自动录入病人的信息，并在下一次同一个病人挂号时直接使用该条记录。
2.  病人挂号时需要选择对应的医师。当医师较多时，需要通过选择科室进行筛选，即选择科室后，医师选项中只会出现相应的医师，其他科室的医师不会出现在选项中。也就是说 **科室信息是非必选的** 。

#### 医师服务
1.  医师可以查看和修改个人信息，修改完毕后直接`提交`即可。
2.  医师处理相应挂号单时，在开药栏选择完对应的药品后，点击`添加`按钮就可以把该药品添加到药物列表中， **可以选择多个药物** ，同时也可以选择药物列表中的行进行`删除`。如果选择了病房，即认为该病人需要住院，会自动生成一条入院信息，若 **没有选择病房** 则认为无需住院。
3.  在出院办理时，医师需要通过 **姓名** 或 **身份证号** 或 **姓名+身份证号** 在住院信息表中，对 **已住院** 病人进行查询，然后填写 **住院费** 后即可办理出院。

#### 管理人员服务
1.  管理人员拥有查询和修改所有表项的权力，但 **财务表不可修改** 。
2.  修改表项信息时， **直接选中** 所需修改的单元格，进行 **合法修改** 后回车即可提交修改到数据库中。
3.  删除表项信息时，选中 **所需删除的行** 然后点击`删除`即可删除对应的记录。但是如果某一个科室旗下有医师信息存在，则该科室不可删除，即 **需要删除科室中所有的医师后。才可删除该科室** 。
4.  增加表项信息时，需要在对应的窗口填写 **正确的信息** 后进行`添加`。

#### 补充信息
1.  项目中所有模块的信息、各个函数的功能、各个变量的说明都在JavaDoc中体现。、
2.  JavaDoc查看方法：打开JavaDoc文件夹，选择其中的一个 **.html** 文件打开（随便打开一个都行），然后就能查看各个模块对应的信息。

## 数据库说明

#### 数据库建立
1.  使用[Navicat](http://www.navicat.com.cn/products)或其他数据库工具，建立名为hospital的数据库。
2.  执行[hospital](hospital.sql)文件，会自动建立对应的表格和相关数据。

#### 补充信息
在`Func.java`中，很容易找到 **数据库连接** 的用户名和密码对应的代码，需要对其进行适当修改。本项目所使用的用户名是 **root** ，密码是 **fengyunxiaowei** ，但由于不同使用者所建立的数据库管理密码不同，所以请修改为 **正确的数据库登录密码** 后，再进行运行。